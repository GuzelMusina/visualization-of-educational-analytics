<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <title>Correlation</title>
    <script src="https://cdn.zingchart.com/zingchart.min.js"></script>

    <script type="text/javascript" src="js/graphics/PieChart.js"></script>
    <script type="text/javascript" src="js/graphics/VerticalBarChart.js"></script>
    <script type="text/javascript" src="js/graphics/CorrelationMatrix.js"></script>
    <script type="text/javascript" src="js/graphics/Filtration.js"></script>

    <script type="text/javascript" src="js/model/Data.js"></script>

    <script type="text/javascript" src="js/data/ReadJSON.js"></script>

    <script type="text/javascript" src="js/actions/clickChart.js"></script>
    <script type="text/javascript" src="js/actions/clickVerticalBarChart.js"></script>

    <script type="text/javascript" src="js/helpFunctions/getPlace.js"></script>
    <script type="text/javascript" src="js/helpFunctions/addToLi.js"></script>
    <script type="text/javascript" src="js/helpFunctions/addToPie.js"></script>
    <script type="text/javascript" src="js/helpFunctions/addToSelection.js"></script>
    <script type="text/javascript" src="js/helpFunctions/prediction.js"></script>
    <script type="text/javascript" src="js/helpFunctions/countCorrelation.js"></script>
    <script type="text/javascript" src="js/helpFunctions/countAverage.js"></script>
    <script type="text/javascript" src="js/helpFunctions/getSumOfScoreArr.js"></script>
    <script type="text/javascript" src="js/helpFunctions/createTable.js"></script>


    <link rel="stylesheet" href="css/pieChart.css">
    <link rel="stylesheet" href="css/verticalBarChart.css">
    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="css/correlationMatrix.css">
    <link rel="stylesheet" href="css/description.css">
    <link href="https://fonts.googleapis.com/css?family=Roboto:400,500&amp;subset=cyrillic" rel="stylesheet">
    <link rel="stylesheet" href="css/popup.style.css">
    <link rel="stylesheet" href="css/filtration.css">
</head>
<body>
<div id="box">
    <ul class="container">

        <li id="pieChart"></li>
        <div id="pieText"></div>
    </ul>
    <ul class="container">
        <ul id="Text0" hidden>
            <h1 id="1sub0"></h1>
            <h2 id="2sub0"></h2>
            <h3 id="3sub0"></h3>
            <li id="sub0"></li>
        </ul>

        <ul id="Text1" hidden>
            <h1 id="1sub1"></h1>
            <h2 id="2sub1"></h2>
            <h3 id="3sub1"></h3>
            <li id="sub1"></li>
        </ul>
    </ul>
    <ul class="container">
        <li id="verticalBarChart"></li>
        <p id="verticalBarText"></p>
    </ul>
    <ul class="container">
        <ul id="table-0" hidden>
            <table>
                <th id="table-0-ege">ЕГЭ</th>
                <th id="table-0-ex">Экзамен</th>
            </table>
        </ul>
        <ul id="table-1" hidden>
            <table>
                <th id="table-1-ege">ЕГЭ</th>
                <th id="table-1-ex">Экзамен</th>
            </table>
        </ul>
        <ul id="table-2" hidden>
            <table>
                <th id="table-2-ege">ЕГЭ</th>
                <th id="table-2-ex">Экзамен</th>
            </table>
        </ul>
    </ul>

    <div id="correlationMatrix"></div>
    <div id="filtration"></div>

    <ul class="container">
        <div class="wrap">
            <div class="btn-box">
                <button type="button" class="btn btn-default" data-modal="modal_1">Предсказать</button>
            </div>
            <div class="overlay" data-close=""></div>

            <div id="modal_1" class="dlg-modal dlg-modal-slide">
                <span class="closer" data-close=""></span>
                <h3>Здесь предсказать можно будет</h3>
                <select id="selectSub">
                    <option id="ssub1" value="ssub1"></option>
                    <option id="ssub2" value="ssub2"></option>
                    <option id="ssub3" value="ssub3"></option>
                </select>
                <select id="selectResult">
                    <option value="1">1</option>
                </select>
                <button id="predict">Предсказать</button>
                <h2>Результат: </h2>
                <h2 id="answerIs"></h2>
            </div>
        </div>
    </ul>
</div>
<script type="text/javascript" src="js/helpFunctions/addScoreToSelection.js"></script>

<!--<div class="btn-box">-->
<!--    <button type="button" class="btn btn-default" ><a href="html/Filtration.html">Посмотреть матрицу корреляции</a> </button>-->
<!--</div>-->

<script>var typeAnimate = 'slide';</script>
<script src="js/actions/popup-css3.function.js"></script>
<script src="js/actions/windowSetUp.js"></script>
<script>
    let request = new XMLHttpRequest();
    request.open('GET', './resources/file.json', true);
    request.responseType = 'text';
    request.send();

    request.onload = function () {
        const test = request.response;
        const jsonObj = JSON.parse(test);
        let data = new Data(getId(jsonObj), getOneSubject1(jsonObj),
            getOneSubject2(jsonObj), getOneSubject3(jsonObj),
            getGender(jsonObj), getEducationType(jsonObj), getFields(jsonObj));

        addToLists(getPlace(countCorrelation(data.getExamScore, data.getEgeScore),
            countCorrelation(data.sub1Ex, data.sub1EgeMod), countCorrelation(data.sub2Ex, data.sub2EgeMod),
            countCorrelation(data.sub3Ex, data.sub3EgeMod), data.subjectsArrEge));

        addToSelection(data.subjectsArrEge);
        prediction(data);
        addToPie(data.subjectsArrEge);
        addToVerticalBar(data.subjectsArrEge);
        createTable(data);

        zingchart.render({
            id: 'pieChart',
            data: getPieChartConfig(data),
            width: 600,
            height: 300,
            margin: 0,
            padding: 0
        });
        zingchart.render({
            id: 'verticalBarChart',
            data: getVerticalBarChart(data),
            width: 600,
            height: 300,
            margin: 0,
            padding: 0
        });
        zingchart.render({
            id: 'verticalBarChart0',
            data: getVerticalBarChart(data),
        });
        zingchart.render({
            id: 'verticalBarChart1',
            data: getVerticalBarChart(data),
        });
        zingchart.render({
            id: 'correlationMatrix',
            data: getCorrelationMatrix(data),
        });
        zingchart.render({
            id: 'filtration',
            data: getFiltration(data),
            height: '100%',
            width: '100%',
        });
    };
    clickChart("pieChart", "Text0", "Text1", "pieChart-graph-id0-plotset-plot-0-node-0", "pieChart-graph-id0-plotset-plot-1-node-0");
    clickVerticalBarChart("verticalBarChart", "table-0", "table-1", "table-2",
        "verticalBarChart-graph-id0-plotset-plot-0-node-0",
        "verticalBarChart-graph-id0-plotset-plot-0-node-1",
        "verticalBarChart-graph-id0-plotset-plot-0-node-2");

</script>
</body>
</html>