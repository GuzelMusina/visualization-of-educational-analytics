<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <title>Correlation</title>
    <script src="https://cdn.zingchart.com/zingchart.min.js"></script>

    <script type="text/javascript" src="js/PieChart/PieChart.js"></script>
    <script type="text/javascript" src="js/data/GetData.js"></script>
    <script type="text/javascript" src="js/data/ReadJSON.js"></script>
    <script type="text/javascript" src="js/PieChart/ClickPieChart.js"></script>
    <script type="text/javascript" src="js/VerticalBarChart/VerticalBarChart.js"></script>
    <script type="text/javascript" src="js/getPlace.js"></script>
    <script type="text/javascript" src="js/addToLi.js"></script>
    <script type="text/javascript" src="js/addToSelection.js"></script>
    <script type="text/javascript" src="js/prediction.js"></script>


    <link rel="stylesheet" href="css/pieChart.css">
    <link rel="stylesheet" href="css/verticalBarChart.css">
    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="css/description.css">
    <link href="https://fonts.googleapis.com/css?family=Roboto:400,500&amp;subset=cyrillic" rel="stylesheet">
    <link href="css/popup.style.css" rel="stylesheet">
</head>
<body>
<div id="box">
    <ul class="container">
        <li id="pieChart"></li>
        <div id="pieText">
            Данные, представленные на графике зависимости отображают насколько баллы ЕГЭ за Биологию,
            Химию и Русский язык коррелируют с оценками за экзамен по тем же предметам на первом курсе
        </div>
    </ul>
    <ul class="container">
        <ul id="Text0" onclick="openMore()" hidden>
            <h1 id="1sub0"></h1>
            <h2 id="2sub0"></h2>
            <h3 id="3sub0"></h3>
            <li id="sub0"></li>
            <span class="closer" data-close=""></span>
        </ul>

        <ul id="Text1" onclick="openMore()" hidden>
            <h1 id="1sub1"></h1>
            <h2 id="2sub1"></h2>
            <h3 id="3sub1"></h3>
            <li id="sub1"></li>
            <span class="closer" data-close=""></span>
        </ul>
    </ul>
    <ul class="container">
        <li id="verticalBarChart"></li>
        <p id="verticalBarText">
            Это средний бал за ЕГЭ и Экзамен по каждому предмету. Можно заметить разницу между результатми
            государственного экзамена и экзамена за первый курс.
        </p>
    </ul>
</div>
<div class="wrap">
    <div class="btn-box">
        <button type="button" class="btn btn-default" data-modal="modal_1">Предсказать</button>
    </div>
    <div class="overlay" data-close=""></div>

    <div id="modal_1" class="dlg-modal dlg-modal-slide">
        <span class="closer" data-close=""></span>
        <h3>Здесь предсказать можно будет</h3>
        <select id="selectSub">
            <option id="ssub1" value="ssub1"></option>
            <option id="ssub2" value="ssub2"></option>
            <option id="ssub3" value="ssub3"></option>
        </select>
        <select id="selectResult">
            <option value="26">26</option>
            <option value="30">30</option>
            <option value="35">35</option>
            <option value="40">40</option>
            <option value="45">45</option>
            <option value="50">50</option>
            <option value="55">55</option>
            <option value="60">60</option>
            <option value="65">65</option>
            <option value="70">70</option>
            <option value="75">75</option>
            <option value="80">80</option>
            <option value="85">85</option>
            <option value="90">90</option>
            <option value="95">95</option>
            <option value="100">100</option>
        </select>
        <button id="predict">Предсказать</button>
        <h2>Результат: </h2>
        <h2 id="answerIs"></h2>
    </div>
</div>
<script>var typeAnimate = 'slide';</script>
<script src="js/popup-css3.function.js"></script>
<script>
    window.smoothScrollTo = (function () {
        var timer, start, factor;

        return function (target, duration) {
            var offset = window.pageYOffset,
                delta = target - window.pageYOffset; // Y-offset difference
            duration = duration || 1000;              // default 1 sec animation
            start = Date.now();                       // get start time
            factor = 0;

            if (timer) {
                clearInterval(timer); // stop any running animations
            }

            function step() {
                var y;
                factor = (Date.now() - start) / duration; // get interpolation factor
                if (factor >= 1) {
                    clearInterval(timer); // stop animation
                    factor = 1;           // clip to max 1.0
                }
                y = factor * delta + offset;
                window.scrollBy(0, y - window.pageYOffset);
            }

            timer = setInterval(step, 10);
            return timer;
        };
    }());

</script>
<script>
    let request = new XMLHttpRequest();
    request.open('GET', './resources/file1.json', true);
    request.responseType = 'text';
    request.send();

    request.onload = function () {
        const test = request.response;
        const jsonObj = JSON.parse(test);
        let data = new Data(getEgeSumArr(jsonObj), getExSumArr(jsonObj), getSubjectName(jsonObj), getOneSubject1(jsonObj),
            getOneSubject2(jsonObj), getOneSubject3(jsonObj));

        addToLi0(getPlace(data.countCorrelation, data.countCorrelationForSubject1, data.countCorrelationForSubject2, data.countCorrelationForSubject3, data.subjectsArrEge));
        addToLi1(getPlace(data.countCorrelation, data.countCorrelationForSubject1, data.countCorrelationForSubject2, data.countCorrelationForSubject3, data.subjectsArrEge));
        addToSelection(data.subjectsArrEge);
        data.prediction;

        zingchart.render({
            id: 'pieChart',
            data: getPieChartConfig(data),
            width: 600,
            height: 300,
            margin: 0,
            padding: 0
        });
        zingchart.render({
            id: 'verticalBarChart',
            data: getVerticalBarChart(data),
            width: 600,
            height: 300,
            margin: 0,
            padding: 0
        });
        zingchart.render({
            id: 'verticalBarChart0',
            data: getVerticalBarChart(data),
        });
        zingchart.render({
            id: 'verticalBarChart1',
            data: getVerticalBarChart(data),
        });
    };
    clickToPieChart("pieChart", "Text0", "Text1", "pieChart-graph-id0-plotset-plot-0-node-0", "pieChart-graph-id0-plotset-plot-1-node-0");
</script>
</body>
</html>